define(["avalon","text!./avalon.spinner.html","css!./avalon.spinner.css"],function(e,a){function n(){var a=0;return e.each(arguments,function(e,n){var l=String(n);l&&l.length>a&&(a=l.length)}),a}var l=function(){};return e.component("aoyou:spinner",{_valueIsValid:!0,_correctValue:0,_normalstyle:!0,_leftstyle:!1,_rightstyle:!1,_add:l,_sub:l,_stepTowards:l,_validate:l,_correct:l,side:"center",value:0,step:1,spdecimal:!0,disabled:!1,min:null,max:null,width:"",onChange:l,$template:a,$construct:function(a,n,l){var t=e.mix(a,n,l);return t},$init:function(a){return a.side&&"center"!=a.side&&(a._normalstyle=!1,"left"==a.side?a._leftstyle=!0:"right"==a.side&&(a._rightstyle=!0)),"string"==typeof a.min&&(a.min=Number(a.min)),"string"==typeof a.max&&(a.max=Number(a.max)),a.min>a.max?(e.log("ERROR: 配置项min应小于max"),a.value="",void(a.disabled=!0)):(null!==a.min&&a.min>0&&(a.value=a.min),null!==a.max&&a.max<0&&(a.value=a.max),a._add=function(){a._stepTowards(1)},a._sub=function(){a._stepTowards(-1)},a._stepTowards=function(e){a.value=Number(a.value);var l=a.value+a.step*e,t=n(a.step,a.value);l=parseFloat(l.toPrecision(t));var i=null!==a.min&&l<a.min,u=null!==a.max&&l>a.max;i?a.value=a.min:u?a.value=a.max:a.value=l},void(a._validate=function(e){if(a._valueIsValid=!0,"-"===e||""===String(e).trim())a._valueIsValid=!1;else{e=Number(e),isNaN(e)&&(e=0,a.value=0);var n=isNaN(e),l=null!==a.min&&e<a.min,t=null!==a.max&&e>a.max;n?(a._valueIsValid=!1,a._correctValue=null===a.min?0:a.min):l?(a._valueIsValid=!1,a._correctValue=a.min):t&&(a._valueIsValid=!1,a._correctValue=a.max),0==a.spdecimal&&(a._correctValue=parseInt(e),a.value=parseInt(e))}}))},$ready:function(e){e.$watch("value",function(a){e._validate(a),e._valueIsValid&&setTimeout(function(){e.onChange(a)},0)}),e._correct=function(a){if(!e._valueIsValid){var n=a.target;n.value=e._correctValue}}}}),e});